package dev.spanhol.day14;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;

public class Day14 {
    String input = "p=26,88 v=80,92\n" +
            "p=2,90 v=77,99\n" +
            "p=43,54 v=-92,-36\n" +
            "p=96,14 v=-15,13\n" +
            "p=33,54 v=97,-64\n" +
            "p=94,53 v=55,67\n" +
            "p=45,28 v=79,6\n" +
            "p=64,90 v=-49,54\n" +
            "p=71,41 v=-9,67\n" +
            "p=15,37 v=58,-14\n" +
            "p=43,53 v=9,8\n" +
            "p=57,88 v=43,-55\n" +
            "p=37,96 v=-30,-69\n" +
            "p=35,54 v=-57,22\n" +
            "p=56,35 v=23,53\n" +
            "p=84,66 v=-94,75\n" +
            "p=15,30 v=-43,21\n" +
            "p=10,97 v=24,-99\n" +
            "p=88,63 v=21,-54\n" +
            "p=77,56 v=47,75\n" +
            "p=83,30 v=38,-38\n" +
            "p=95,97 v=-2,-91\n" +
            "p=7,32 v=-1,-42\n" +
            "p=62,84 v=-66,69\n" +
            "p=79,66 v=-48,-34\n" +
            "p=54,39 v=-12,21\n" +
            "p=87,9 v=-6,-39\n" +
            "p=66,101 v=-57,-87\n" +
            "p=47,83 v=-48,69\n" +
            "p=48,24 v=2,28\n" +
            "p=71,48 v=-14,-73\n" +
            "p=25,36 v=40,-66\n" +
            "p=10,12 v=-29,5\n" +
            "p=44,10 v=-79,-17\n" +
            "p=9,65 v=-7,-65\n" +
            "p=12,83 v=77,-85\n" +
            "p=70,38 v=-69,-19\n" +
            "p=60,38 v=-31,-15\n" +
            "p=98,20 v=7,-38\n" +
            "p=38,73 v=-61,33\n" +
            "p=34,32 v=-21,-96\n" +
            "p=48,44 v=-19,-34\n" +
            "p=26,49 v=-50,29\n" +
            "p=79,84 v=82,-93\n" +
            "p=50,43 v=41,57\n" +
            "p=9,76 v=-19,-80\n" +
            "p=81,20 v=25,36\n" +
            "p=18,19 v=45,-2\n" +
            "p=36,85 v=-34,89\n" +
            "p=38,16 v=63,75\n" +
            "p=45,31 v=-18,-78\n" +
            "p=7,42 v=-16,66\n" +
            "p=55,57 v=-77,-11\n" +
            "p=30,28 v=-43,-23\n" +
            "p=57,58 v=43,-49\n" +
            "p=36,57 v=97,-58\n" +
            "p=7,47 v=-64,-14\n" +
            "p=73,33 v=26,-48\n" +
            "p=52,48 v=7,-48\n" +
            "p=42,66 v=23,75\n" +
            "p=77,8 v=-28,-82\n" +
            "p=52,99 v=44,4\n" +
            "p=27,15 v=37,-3\n" +
            "p=72,57 v=65,53\n" +
            "p=59,85 v=69,-54\n" +
            "p=58,50 v=57,-95\n" +
            "p=54,73 v=-66,-19\n" +
            "p=54,64 v=31,-95\n" +
            "p=91,33 v=53,-43\n" +
            "p=67,2 v=-5,34\n" +
            "p=58,65 v=-31,38\n" +
            "p=65,93 v=62,17\n" +
            "p=68,59 v=-44,-42\n" +
            "p=9,27 v=-60,-99\n" +
            "p=4,73 v=77,-87\n" +
            "p=88,60 v=18,-20\n" +
            "p=82,9 v=-96,-9\n" +
            "p=99,39 v=-11,-24\n" +
            "p=23,18 v=-56,28\n" +
            "p=63,101 v=66,-48\n" +
            "p=4,63 v=-46,97\n" +
            "p=41,80 v=31,-49\n" +
            "p=21,25 v=45,36\n" +
            "p=89,43 v=-2,63\n" +
            "p=37,78 v=11,86\n" +
            "p=37,100 v=32,93\n" +
            "p=77,33 v=-94,29\n" +
            "p=25,34 v=-12,-81\n" +
            "p=31,87 v=-30,70\n" +
            "p=40,37 v=62,7\n" +
            "p=16,102 v=-82,4\n" +
            "p=98,45 v=-8,95\n" +
            "p=60,23 v=-53,-60\n" +
            "p=12,83 v=-8,19\n" +
            "p=49,8 v=-70,-39\n" +
            "p=38,27 v=25,-49\n" +
            "p=95,25 v=-59,28\n" +
            "p=42,56 v=18,-51\n" +
            "p=5,28 v=24,-73\n" +
            "p=92,73 v=7,33\n" +
            "p=41,27 v=88,80\n" +
            "p=78,16 v=18,3\n" +
            "p=11,80 v=99,62\n" +
            "p=100,56 v=46,98\n" +
            "p=97,47 v=20,8\n" +
            "p=27,6 v=-78,78\n" +
            "p=45,12 v=-48,-98\n" +
            "p=41,29 v=-44,-46\n" +
            "p=84,69 v=-76,-94\n" +
            "p=89,4 v=-70,-52\n" +
            "p=40,62 v=-60,72\n" +
            "p=62,26 v=40,-48\n" +
            "p=21,55 v=23,-87\n" +
            "p=80,45 v=-49,-82\n" +
            "p=28,100 v=23,49\n" +
            "p=67,38 v=6,-2\n" +
            "p=66,40 v=17,-44\n" +
            "p=72,32 v=-85,-28\n" +
            "p=53,60 v=35,-14\n" +
            "p=11,14 v=45,72\n" +
            "p=86,13 v=-36,49\n" +
            "p=65,88 v=-58,3\n" +
            "p=97,79 v=72,17\n" +
            "p=51,55 v=27,24\n" +
            "p=2,83 v=33,91\n" +
            "p=78,76 v=-31,-89\n" +
            "p=83,12 v=86,49\n" +
            "p=56,93 v=13,19\n" +
            "p=20,50 v=-38,45\n" +
            "p=46,6 v=58,17\n" +
            "p=48,40 v=66,-8\n" +
            "p=40,26 v=40,14\n" +
            "p=71,21 v=92,-59\n" +
            "p=5,67 v=59,-27\n" +
            "p=65,53 v=-62,44\n" +
            "p=14,83 v=69,75\n" +
            "p=95,35 v=-37,58\n" +
            "p=36,71 v=-57,-43\n" +
            "p=68,58 v=-97,37\n" +
            "p=45,75 v=66,61\n" +
            "p=25,22 v=-75,-66\n" +
            "p=38,8 v=-17,-83\n" +
            "p=32,8 v=-8,71\n" +
            "p=85,78 v=-44,54\n" +
            "p=48,64 v=53,-65\n" +
            "p=97,82 v=77,-78\n" +
            "p=10,32 v=99,-27\n" +
            "p=84,39 v=8,-21\n" +
            "p=83,58 v=74,75\n" +
            "p=67,65 v=48,-6\n" +
            "p=78,43 v=25,59\n" +
            "p=22,83 v=23,19\n" +
            "p=36,45 v=-65,-95\n" +
            "p=95,51 v=-32,-59\n" +
            "p=66,5 v=74,78\n" +
            "p=76,27 v=-42,52\n" +
            "p=99,64 v=75,-46\n" +
            "p=51,102 v=44,-25\n" +
            "p=97,14 v=-41,78\n" +
            "p=78,56 v=-76,1\n" +
            "p=77,12 v=-1,-97\n" +
            "p=58,1 v=13,34\n" +
            "p=5,28 v=68,-8\n" +
            "p=30,6 v=31,-83\n" +
            "p=11,91 v=78,-82\n" +
            "p=15,39 v=78,-26\n" +
            "p=32,58 v=84,-36\n" +
            "p=16,55 v=-36,75\n" +
            "p=100,96 v=16,42\n" +
            "p=89,28 v=-6,87\n" +
            "p=48,19 v=-57,21\n" +
            "p=42,50 v=-31,15\n" +
            "p=54,11 v=92,-24\n" +
            "p=77,98 v=-9,-33\n" +
            "p=71,36 v=2,60\n" +
            "p=18,44 v=-55,-66\n" +
            "p=26,16 v=-62,79\n" +
            "p=35,80 v=93,-41\n" +
            "p=90,30 v=29,-96\n" +
            "p=44,59 v=-26,-4\n" +
            "p=87,52 v=-43,89\n" +
            "p=91,39 v=3,-52\n" +
            "p=35,52 v=49,8\n" +
            "p=27,60 v=-12,-35\n" +
            "p=7,18 v=-53,-14\n" +
            "p=65,67 v=-32,91\n" +
            "p=13,6 v=19,93\n" +
            "p=94,28 v=35,33\n" +
            "p=22,29 v=-38,-78\n" +
            "p=91,59 v=26,-39\n" +
            "p=84,43 v=-76,67\n" +
            "p=29,102 v=-8,-99\n" +
            "p=84,92 v=-46,-36\n" +
            "p=56,10 v=-88,20\n" +
            "p=88,81 v=16,63\n" +
            "p=19,20 v=-41,79\n" +
            "p=43,54 v=48,59\n" +
            "p=11,0 v=28,-61\n" +
            "p=4,40 v=-94,-82\n" +
            "p=38,101 v=-18,55\n" +
            "p=88,18 v=-2,8\n" +
            "p=13,19 v=28,21\n" +
            "p=29,11 v=6,-69\n" +
            "p=76,91 v=16,49\n" +
            "p=74,29 v=78,74\n" +
            "p=45,53 v=58,-80\n" +
            "p=86,11 v=94,1\n" +
            "p=65,59 v=-14,-6\n" +
            "p=60,62 v=98,64\n" +
            "p=57,3 v=48,-32\n" +
            "p=46,48 v=83,15\n" +
            "p=54,78 v=58,-63\n" +
            "p=91,35 v=-19,-74\n" +
            "p=36,83 v=55,-11\n" +
            "p=67,53 v=63,-20\n" +
            "p=20,86 v=-25,63\n" +
            "p=37,7 v=-30,79\n" +
            "p=42,7 v=75,-54\n" +
            "p=76,73 v=14,1\n" +
            "p=34,57 v=1,-21\n" +
            "p=31,76 v=79,-44\n" +
            "p=53,93 v=26,35\n" +
            "p=60,65 v=-97,-42\n" +
            "p=99,102 v=-46,-55\n" +
            "p=65,1 v=-32,-25\n" +
            "p=86,14 v=60,-61\n" +
            "p=9,95 v=85,-39\n" +
            "p=63,86 v=-95,95\n" +
            "p=4,93 v=94,92\n" +
            "p=7,81 v=99,-40\n" +
            "p=28,0 v=28,5\n" +
            "p=52,41 v=-2,7\n" +
            "p=14,64 v=-16,-57\n" +
            "p=22,78 v=-56,54\n" +
            "p=44,98 v=-88,45\n" +
            "p=52,72 v=22,-79\n" +
            "p=63,35 v=13,-52\n" +
            "p=62,64 v=-62,39\n" +
            "p=10,53 v=67,31\n" +
            "p=16,100 v=-69,-63\n" +
            "p=17,47 v=92,-56\n" +
            "p=86,22 v=69,94\n" +
            "p=49,37 v=-79,95\n" +
            "p=92,96 v=-50,48\n" +
            "p=54,5 v=-48,70\n" +
            "p=67,12 v=-76,34\n" +
            "p=10,10 v=73,34\n" +
            "p=100,4 v=6,72\n" +
            "p=1,32 v=-90,37\n" +
            "p=33,22 v=-8,14\n" +
            "p=10,96 v=94,-9\n" +
            "p=84,95 v=-19,-25\n" +
            "p=42,27 v=66,-60\n" +
            "p=67,91 v=-76,11\n" +
            "p=21,23 v=-95,50\n" +
            "p=53,24 v=-57,-97\n" +
            "p=19,1 v=47,-62\n" +
            "p=84,59 v=-5,-2\n" +
            "p=10,35 v=37,-88\n" +
            "p=56,76 v=-92,-33\n" +
            "p=92,83 v=16,62\n" +
            "p=6,97 v=72,11\n" +
            "p=65,29 v=4,-82\n" +
            "p=37,52 v=4,29\n" +
            "p=78,53 v=39,74\n" +
            "p=100,50 v=83,-3\n" +
            "p=43,48 v=-61,8\n" +
            "p=78,102 v=-22,-99\n" +
            "p=89,73 v=25,2\n" +
            "p=91,86 v=7,48\n" +
            "p=88,37 v=-45,20\n" +
            "p=80,91 v=81,32\n" +
            "p=6,6 v=24,-83\n" +
            "p=86,57 v=3,-14\n" +
            "p=16,12 v=32,-76\n" +
            "p=46,53 v=-67,47\n" +
            "p=79,11 v=-54,64\n" +
            "p=87,99 v=-35,-7\n" +
            "p=8,34 v=-37,-75\n" +
            "p=73,61 v=-70,13\n" +
            "p=38,2 v=-84,40\n" +
            "p=92,23 v=9,25\n" +
            "p=35,60 v=-25,31\n" +
            "p=72,9 v=16,27\n" +
            "p=9,33 v=-7,-31\n" +
            "p=98,17 v=50,28\n" +
            "p=62,15 v=34,-54\n" +
            "p=72,4 v=21,86\n" +
            "p=46,53 v=-39,61\n" +
            "p=80,58 v=84,-86\n" +
            "p=83,88 v=-86,29\n" +
            "p=2,38 v=62,-38\n" +
            "p=70,61 v=23,-97\n" +
            "p=100,77 v=-64,-72\n" +
            "p=27,45 v=58,-14\n" +
            "p=25,3 v=40,72\n" +
            "p=73,102 v=-74,34\n" +
            "p=80,63 v=-58,-56\n" +
            "p=50,52 v=53,-7\n" +
            "p=33,82 v=19,99\n" +
            "p=28,15 v=-52,57\n" +
            "p=66,43 v=-54,-6\n" +
            "p=44,40 v=-56,63\n" +
            "p=31,12 v=36,65\n" +
            "p=3,41 v=-99,52\n" +
            "p=35,87 v=-4,-86\n" +
            "p=79,84 v=-67,99\n" +
            "p=88,22 v=16,-2\n" +
            "p=71,85 v=92,70\n" +
            "p=96,60 v=76,98\n" +
            "p=38,48 v=14,-7\n" +
            "p=86,15 v=-33,-75\n" +
            "p=75,57 v=66,-85\n" +
            "p=85,68 v=-19,-27\n" +
            "p=46,95 v=75,48\n" +
            "p=14,71 v=32,1\n" +
            "p=74,71 v=-54,-95\n" +
            "p=11,12 v=-64,13\n" +
            "p=17,37 v=81,53\n" +
            "p=2,15 v=23,-3\n" +
            "p=9,75 v=-39,47\n" +
            "p=46,70 v=44,-34\n" +
            "p=86,48 v=-15,-98\n" +
            "p=32,45 v=62,81\n" +
            "p=22,3 v=59,94\n" +
            "p=24,81 v=-82,25\n" +
            "p=85,11 v=-3,-32\n" +
            "p=96,86 v=20,39\n" +
            "p=43,2 v=62,42\n" +
            "p=45,98 v=-26,-54\n" +
            "p=51,16 v=92,-53\n" +
            "p=77,13 v=-45,-61\n" +
            "p=58,54 v=-44,30\n" +
            "p=52,3 v=-49,-33\n" +
            "p=28,76 v=-12,-64\n" +
            "p=45,38 v=-53,34\n" +
            "p=11,28 v=85,-67\n" +
            "p=29,88 v=90,4\n" +
            "p=44,102 v=-21,17\n" +
            "p=15,37 v=94,66\n" +
            "p=73,32 v=30,80\n" +
            "p=65,86 v=-19,-21\n" +
            "p=34,64 v=-26,16\n" +
            "p=60,2 v=-18,78\n" +
            "p=39,0 v=-34,94\n" +
            "p=28,15 v=32,-93\n" +
            "p=8,100 v=98,40\n" +
            "p=62,62 v=48,60\n" +
            "p=37,44 v=25,10\n" +
            "p=39,72 v=-96,91\n" +
            "p=84,33 v=93,18\n" +
            "p=81,44 v=69,52\n" +
            "p=37,22 v=89,-48\n" +
            "p=0,42 v=-63,-36\n" +
            "p=35,42 v=-17,-22\n" +
            "p=90,39 v=-76,-30\n" +
            "p=55,74 v=-22,-92\n" +
            "p=1,55 v=-64,-86\n" +
            "p=60,23 v=-9,-97\n" +
            "p=21,4 v=-91,64\n" +
            "p=90,72 v=56,95\n" +
            "p=35,41 v=58,22\n" +
            "p=57,81 v=-9,-96\n" +
            "p=11,102 v=-73,-17\n" +
            "p=45,58 v=-43,52\n" +
            "p=43,25 v=48,-37\n" +
            "p=78,12 v=12,42\n" +
            "p=48,43 v=79,-29\n" +
            "p=31,100 v=-30,-54\n" +
            "p=24,63 v=-61,28\n" +
            "p=44,67 v=-35,-94\n" +
            "p=100,49 v=-98,-52\n" +
            "p=29,54 v=41,-64\n" +
            "p=29,33 v=50,44\n" +
            "p=22,40 v=-47,8\n" +
            "p=56,67 v=-5,75\n" +
            "p=78,95 v=78,-48\n" +
            "p=58,72 v=-48,-65\n" +
            "p=6,94 v=90,9\n" +
            "p=76,58 v=12,-80\n" +
            "p=68,62 v=-58,61\n" +
            "p=62,85 v=57,91\n" +
            "p=16,88 v=94,-5\n" +
            "p=72,0 v=-74,-91\n" +
            "p=0,75 v=11,-93\n" +
            "p=48,42 v=92,-6\n" +
            "p=24,102 v=68,-78\n" +
            "p=21,86 v=-56,25\n" +
            "p=3,63 v=-11,-43\n" +
            "p=36,102 v=14,-4\n" +
            "p=56,52 v=4,-58\n" +
            "p=5,55 v=-1,84\n" +
            "p=92,1 v=-94,-84\n" +
            "p=27,50 v=54,-88\n" +
            "p=80,91 v=-76,33\n" +
            "p=50,19 v=9,87\n" +
            "p=69,37 v=-58,-8\n" +
            "p=34,63 v=14,61\n" +
            "p=17,52 v=19,37\n" +
            "p=93,65 v=-15,46\n" +
            "p=37,15 v=-13,56\n" +
            "p=100,63 v=-68,17\n" +
            "p=41,81 v=97,-92\n" +
            "p=62,17 v=-72,13\n" +
            "p=0,16 v=-77,-31\n" +
            "p=14,17 v=41,28\n" +
            "p=27,34 v=58,-74\n" +
            "p=35,40 v=14,21\n" +
            "p=8,88 v=-24,98\n" +
            "p=35,28 v=-94,46\n" +
            "p=93,42 v=-59,22\n" +
            "p=83,26 v=-11,1\n" +
            "p=2,22 v=-42,65\n" +
            "p=35,102 v=-25,-4\n" +
            "p=21,22 v=41,-81\n" +
            "p=35,0 v=5,41\n" +
            "p=70,99 v=74,34\n" +
            "p=75,28 v=4,81\n" +
            "p=11,91 v=-56,33\n" +
            "p=16,52 v=65,-38\n" +
            "p=55,14 v=-66,78\n" +
            "p=39,68 v=-71,7\n" +
            "p=25,53 v=-56,-29\n" +
            "p=70,42 v=-33,-35\n" +
            "p=40,81 v=-70,47\n" +
            "p=15,78 v=-82,26\n" +
            "p=85,97 v=51,-33\n" +
            "p=78,72 v=43,-48\n" +
            "p=92,60 v=-77,10\n" +
            "p=55,65 v=-14,-79\n" +
            "p=46,45 v=92,-72\n" +
            "p=15,54 v=-3,-51\n" +
            "p=65,2 v=-80,-70\n" +
            "p=73,30 v=78,-74\n" +
            "p=23,12 v=-64,-98\n" +
            "p=85,3 v=-68,-11\n" +
            "p=30,69 v=-21,69\n" +
            "p=57,38 v=-18,37\n" +
            "p=11,88 v=-82,-19\n" +
            "p=55,101 v=-54,44\n" +
            "p=68,56 v=57,-65\n" +
            "p=4,81 v=-12,92\n" +
            "p=43,70 v=62,-27\n" +
            "p=42,25 v=-31,13\n" +
            "p=0,61 v=-16,-64\n" +
            "p=45,25 v=31,-82\n" +
            "p=23,75 v=-47,92\n" +
            "p=57,33 v=-30,25\n" +
            "p=0,34 v=-94,-36\n" +
            "p=78,57 v=34,-43\n" +
            "p=67,99 v=-22,4\n" +
            "p=3,46 v=-99,8\n" +
            "p=44,28 v=80,-66\n" +
            "p=84,60 v=72,18\n" +
            "p=51,66 v=-88,67\n" +
            "p=38,7 v=-61,-47\n" +
            "p=34,23 v=40,-88\n" +
            "p=66,46 v=83,-81\n" +
            "p=73,98 v=51,33\n" +
            "p=37,56 v=62,81\n" +
            "p=30,98 v=28,58\n" +
            "p=71,99 v=38,62\n" +
            "p=64,7 v=52,86\n" +
            "p=26,53 v=-12,89\n" +
            "p=87,50 v=43,-29\n" +
            "p=65,101 v=87,-96\n" +
            "p=34,52 v=-21,66\n" +
            "p=14,84 v=-60,3\n" +
            "p=4,7 v=-50,49\n" +
            "p=45,73 v=-17,-64\n" +
            "p=18,92 v=-29,40\n" +
            "p=83,54 v=2,-64\n" +
            "p=95,26 v=60,50\n" +
            "p=86,80 v=95,25\n" +
            "p=5,52 v=-25,15\n" +
            "p=99,98 v=-46,77\n" +
            "p=81,52 v=25,9\n" +
            "p=53,89 v=-54,-83\n" +
            "p=60,36 v=92,73\n" +
            "p=78,27 v=7,15\n" +
            "p=55,51 v=-63,-74\n" +
            "p=5,85 v=-56,-97\n" +
            "p=26,17 v=6,46\n" +
            "p=37,36 v=-67,51\n" +
            "p=69,52 v=96,67\n" +
            "p=24,86 v=-11,35\n" +
            "p=44,1 v=-21,26\n" +
            "p=55,95 v=61,-33\n" +
            "p=75,101 v=65,-3\n" +
            "p=16,17 v=-29,29\n" +
            "p=80,69 v=12,68\n" +
            "p=78,61 v=-11,-7\n" +
            "p=99,99 v=11,-62\n" +
            "p=41,47 v=47,-86\n" +
            "p=52,81 v=31,54\n" +
            "p=86,60 v=-37,16\n" +
            "p=15,89 v=-43,-18\n" +
            "p=72,99 v=12,26\n" +
            "p=42,15 v=-13,-47\n" +
            "p=37,79 v=-41,70";
    int width = 101;
    int height = 103;
    Map map;
    ArrayList<Robot> robots;


    public void readRobots() {
        String[] lines = input.split("\n");
        for (String line : lines) {
            String[] tokens = line.split(" ");
            String[] positions = tokens[0].substring(2).split(",");
            String[] velocities = tokens[1].substring(2).split(",");
            System.out.println();
            Robot robot = new Robot(Integer.parseInt(positions[0]), Integer.parseInt(positions[1]), Integer.parseInt(velocities[0]), Integer.parseInt(velocities[1]));
            robots.add(robot);
        }
    }

    public void part1() {
        robots = new ArrayList<>();
        map = new Map(width, height);
        readRobots();
        map.setRobots(robots);

//        System.out.println(map.toString().getBytes());
//        for (int i = 0; i < 100; i++) {
//            map.moveRobots();
//            System.out.println(map.toString().getBytes());
//        }

        System.out.println(map.toString().getBytes());
        System.out.println(map.safetyFactor());
    }


    public void part2() throws IOException {
        robots = new ArrayList<>();
        map = new Map(width, height);
        readRobots();
        map.setRobots(robots);

        File out = new File("out.txt");
        out.createNewFile();
        FileOutputStream fos = new FileOutputStream(out);

        fos.write(map.toString().getBytes());
        for (int i = 0; i < 10402; i++) {
            map.moveRobots();
            fos.write((i + "\n\n").getBytes());
            fos.write(map.toString().getBytes());
        }
        fos.close();
    }
}
