package dev.spanhol.Five;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

public class Five {
    String input = "58|55\n" +
            "89|38\n" +
            "89|34\n" +
            "85|64\n" +
            "85|25\n" +
            "85|43\n" +
            "71|97\n" +
            "71|17\n" +
            "71|85\n" +
            "71|87\n" +
            "91|77\n" +
            "91|67\n" +
            "91|35\n" +
            "91|85\n" +
            "91|44\n" +
            "49|43\n" +
            "49|27\n" +
            "49|38\n" +
            "49|75\n" +
            "49|34\n" +
            "49|55\n" +
            "78|13\n" +
            "78|62\n" +
            "78|23\n" +
            "78|43\n" +
            "78|51\n" +
            "78|49\n" +
            "78|83\n" +
            "77|49\n" +
            "77|17\n" +
            "77|85\n" +
            "77|46\n" +
            "77|71\n" +
            "77|97\n" +
            "77|19\n" +
            "77|87\n" +
            "51|75\n" +
            "51|15\n" +
            "51|47\n" +
            "51|79\n" +
            "51|67\n" +
            "51|34\n" +
            "51|24\n" +
            "51|83\n" +
            "51|84\n" +
            "36|38\n" +
            "36|94\n" +
            "36|89\n" +
            "36|64\n" +
            "36|62\n" +
            "36|45\n" +
            "36|44\n" +
            "36|87\n" +
            "36|78\n" +
            "36|39\n" +
            "76|51\n" +
            "76|39\n" +
            "76|55\n" +
            "76|64\n" +
            "76|17\n" +
            "76|25\n" +
            "76|62\n" +
            "76|49\n" +
            "76|43\n" +
            "76|27\n" +
            "76|78\n" +
            "48|77\n" +
            "48|19\n" +
            "48|97\n" +
            "48|86\n" +
            "48|53\n" +
            "48|85\n" +
            "48|71\n" +
            "48|74\n" +
            "48|15\n" +
            "48|91\n" +
            "48|59\n" +
            "48|34\n" +
            "46|78\n" +
            "46|64\n" +
            "46|76\n" +
            "46|44\n" +
            "46|43\n" +
            "46|24\n" +
            "46|85\n" +
            "46|27\n" +
            "46|17\n" +
            "46|19\n" +
            "46|49\n" +
            "46|35\n" +
            "46|36\n" +
            "34|79\n" +
            "34|59\n" +
            "34|53\n" +
            "34|46\n" +
            "34|86\n" +
            "34|97\n" +
            "34|75\n" +
            "34|36\n" +
            "34|57\n" +
            "34|83\n" +
            "34|98\n" +
            "34|71\n" +
            "34|45\n" +
            "34|74\n" +
            "11|15\n" +
            "11|91\n" +
            "11|46\n" +
            "11|74\n" +
            "11|84\n" +
            "11|48\n" +
            "11|79\n" +
            "11|77\n" +
            "11|34\n" +
            "11|24\n" +
            "11|53\n" +
            "11|67\n" +
            "11|19\n" +
            "11|36\n" +
            "11|57\n" +
            "53|98\n" +
            "53|79\n" +
            "53|35\n" +
            "53|46\n" +
            "53|57\n" +
            "53|91\n" +
            "53|85\n" +
            "53|97\n" +
            "53|36\n" +
            "53|84\n" +
            "53|67\n" +
            "53|59\n" +
            "53|93\n" +
            "53|15\n" +
            "53|44\n" +
            "53|45\n" +
            "47|24\n" +
            "47|71\n" +
            "47|13\n" +
            "47|19\n" +
            "47|91\n" +
            "47|46\n" +
            "47|98\n" +
            "47|74\n" +
            "47|53\n" +
            "47|75\n" +
            "47|67\n" +
            "47|57\n" +
            "47|45\n" +
            "47|77\n" +
            "47|83\n" +
            "47|79\n" +
            "47|36\n" +
            "55|79\n" +
            "55|91\n" +
            "55|57\n" +
            "55|19\n" +
            "55|53\n" +
            "55|24\n" +
            "55|36\n" +
            "55|13\n" +
            "55|67\n" +
            "55|74\n" +
            "55|98\n" +
            "55|86\n" +
            "55|45\n" +
            "55|15\n" +
            "55|85\n" +
            "55|75\n" +
            "55|46\n" +
            "55|59\n" +
            "35|23\n" +
            "35|11\n" +
            "35|94\n" +
            "35|47\n" +
            "35|64\n" +
            "35|62\n" +
            "35|27\n" +
            "35|49\n" +
            "35|72\n" +
            "35|38\n" +
            "35|83\n" +
            "35|87\n" +
            "35|25\n" +
            "35|43\n" +
            "35|44\n" +
            "35|39\n" +
            "35|51\n" +
            "35|48\n" +
            "35|74\n" +
            "45|89\n" +
            "45|85\n" +
            "45|51\n" +
            "45|49\n" +
            "45|97\n" +
            "45|64\n" +
            "45|25\n" +
            "45|93\n" +
            "45|58\n" +
            "45|23\n" +
            "45|78\n" +
            "45|87\n" +
            "45|44\n" +
            "45|94\n" +
            "45|27\n" +
            "45|39\n" +
            "45|11\n" +
            "45|62\n" +
            "45|38\n" +
            "45|72\n" +
            "38|55\n" +
            "38|59\n" +
            "38|83\n" +
            "38|51\n" +
            "38|67\n" +
            "38|94\n" +
            "38|91\n" +
            "38|58\n" +
            "38|48\n" +
            "38|47\n" +
            "38|77\n" +
            "38|75\n" +
            "38|13\n" +
            "38|62\n" +
            "38|15\n" +
            "38|86\n" +
            "38|72\n" +
            "38|74\n" +
            "38|23\n" +
            "38|53\n" +
            "38|25\n" +
            "64|25\n" +
            "64|94\n" +
            "64|62\n" +
            "64|34\n" +
            "64|11\n" +
            "64|53\n" +
            "64|59\n" +
            "64|58\n" +
            "64|38\n" +
            "64|74\n" +
            "64|75\n" +
            "64|51\n" +
            "64|48\n" +
            "64|13\n" +
            "64|86\n" +
            "64|55\n" +
            "64|47\n" +
            "64|43\n" +
            "64|49\n" +
            "64|27\n" +
            "64|83\n" +
            "64|23\n" +
            "62|48\n" +
            "62|77\n" +
            "62|83\n" +
            "62|55\n" +
            "62|25\n" +
            "62|34\n" +
            "62|86\n" +
            "62|15\n" +
            "62|84\n" +
            "62|53\n" +
            "62|79\n" +
            "62|47\n" +
            "62|59\n" +
            "62|67\n" +
            "62|74\n" +
            "62|72\n" +
            "62|94\n" +
            "62|75\n" +
            "62|11\n" +
            "62|91\n" +
            "62|13\n" +
            "62|57\n" +
            "62|58\n" +
            "44|27\n" +
            "44|43\n" +
            "44|74\n" +
            "44|49\n" +
            "44|86\n" +
            "44|11\n" +
            "44|38\n" +
            "44|64\n" +
            "44|89\n" +
            "44|94\n" +
            "44|72\n" +
            "44|47\n" +
            "44|39\n" +
            "44|25\n" +
            "44|55\n" +
            "44|34\n" +
            "44|87\n" +
            "44|23\n" +
            "44|83\n" +
            "44|78\n" +
            "44|51\n" +
            "44|62\n" +
            "44|48\n" +
            "44|58\n" +
            "72|67\n" +
            "72|53\n" +
            "72|77\n" +
            "72|46\n" +
            "72|75\n" +
            "72|71\n" +
            "72|11\n" +
            "72|84\n" +
            "72|15\n" +
            "72|55\n" +
            "72|34\n" +
            "72|91\n" +
            "72|25\n" +
            "72|24\n" +
            "72|79\n" +
            "72|57\n" +
            "72|36\n" +
            "72|48\n" +
            "72|13\n" +
            "72|59\n" +
            "72|83\n" +
            "72|86\n" +
            "72|74\n" +
            "72|47\n" +
            "15|45\n" +
            "15|27\n" +
            "15|76\n" +
            "15|89\n" +
            "15|77\n" +
            "15|19\n" +
            "15|35\n" +
            "15|87\n" +
            "15|79\n" +
            "15|24\n" +
            "15|64\n" +
            "15|98\n" +
            "15|46\n" +
            "15|97\n" +
            "15|17\n" +
            "15|93\n" +
            "15|39\n" +
            "15|36\n" +
            "15|71\n" +
            "15|78\n" +
            "15|85\n" +
            "15|49\n" +
            "15|44\n" +
            "15|57\n" +
            "94|51\n" +
            "94|74\n" +
            "94|13\n" +
            "94|58\n" +
            "94|83\n" +
            "94|79\n" +
            "94|59\n" +
            "94|25\n" +
            "94|46\n" +
            "94|53\n" +
            "94|67\n" +
            "94|72\n" +
            "94|48\n" +
            "94|34\n" +
            "94|75\n" +
            "94|84\n" +
            "94|55\n" +
            "94|77\n" +
            "94|15\n" +
            "94|47\n" +
            "94|86\n" +
            "94|91\n" +
            "94|57\n" +
            "94|11\n" +
            "84|35\n" +
            "84|77\n" +
            "84|98\n" +
            "84|93\n" +
            "84|85\n" +
            "84|45\n" +
            "84|87\n" +
            "84|79\n" +
            "84|64\n" +
            "84|44\n" +
            "84|36\n" +
            "84|97\n" +
            "84|78\n" +
            "84|46\n" +
            "84|76\n" +
            "84|89\n" +
            "84|24\n" +
            "84|39\n" +
            "84|57\n" +
            "84|49\n" +
            "84|17\n" +
            "84|15\n" +
            "84|19\n" +
            "84|71\n" +
            "98|62\n" +
            "98|94\n" +
            "98|64\n" +
            "98|89\n" +
            "98|44\n" +
            "98|43\n" +
            "98|27\n" +
            "98|87\n" +
            "98|97\n" +
            "98|19\n" +
            "98|45\n" +
            "98|17\n" +
            "98|85\n" +
            "98|39\n" +
            "98|72\n" +
            "98|93\n" +
            "98|51\n" +
            "98|76\n" +
            "98|23\n" +
            "98|35\n" +
            "98|58\n" +
            "98|49\n" +
            "98|38\n" +
            "98|78\n" +
            "79|64\n" +
            "79|27\n" +
            "79|17\n" +
            "79|76\n" +
            "79|78\n" +
            "79|36\n" +
            "79|49\n" +
            "79|45\n" +
            "79|71\n" +
            "79|97\n" +
            "79|39\n" +
            "79|85\n" +
            "79|43\n" +
            "79|24\n" +
            "79|44\n" +
            "79|98\n" +
            "79|93\n" +
            "79|89\n" +
            "79|38\n" +
            "79|87\n" +
            "79|46\n" +
            "79|57\n" +
            "79|35\n" +
            "79|19\n" +
            "17|35\n" +
            "17|87\n" +
            "17|94\n" +
            "17|25\n" +
            "17|58\n" +
            "17|43\n" +
            "17|49\n" +
            "17|78\n" +
            "17|38\n" +
            "17|55\n" +
            "17|27\n" +
            "17|72\n" +
            "17|11\n" +
            "17|51\n" +
            "17|34\n" +
            "17|44\n" +
            "17|23\n" +
            "17|64\n" +
            "17|47\n" +
            "17|62\n" +
            "17|83\n" +
            "17|39\n" +
            "17|48\n" +
            "17|89\n" +
            "59|87\n" +
            "59|35\n" +
            "59|24\n" +
            "59|67\n" +
            "59|19\n" +
            "59|36\n" +
            "59|39\n" +
            "59|93\n" +
            "59|84\n" +
            "59|57\n" +
            "59|77\n" +
            "59|85\n" +
            "59|79\n" +
            "59|98\n" +
            "59|75\n" +
            "59|44\n" +
            "59|45\n" +
            "59|89\n" +
            "59|46\n" +
            "59|97\n" +
            "59|17\n" +
            "59|76\n" +
            "59|71\n" +
            "59|15\n" +
            "87|64\n" +
            "87|72\n" +
            "87|48\n" +
            "87|13\n" +
            "87|62\n" +
            "87|34\n" +
            "87|55\n" +
            "87|38\n" +
            "87|94\n" +
            "87|83\n" +
            "87|11\n" +
            "87|47\n" +
            "87|43\n" +
            "87|58\n" +
            "87|23\n" +
            "87|78\n" +
            "87|49\n" +
            "87|51\n" +
            "87|74\n" +
            "87|86\n" +
            "87|27\n" +
            "87|25\n" +
            "87|39\n" +
            "87|89\n" +
            "93|43\n" +
            "93|94\n" +
            "93|78\n" +
            "93|39\n" +
            "93|23\n" +
            "93|87\n" +
            "93|38\n" +
            "93|49\n" +
            "93|76\n" +
            "93|47\n" +
            "93|25\n" +
            "93|51\n" +
            "93|35\n" +
            "93|17\n" +
            "93|89\n" +
            "93|64\n" +
            "93|48\n" +
            "93|72\n" +
            "93|44\n" +
            "93|62\n" +
            "93|11\n" +
            "93|27\n" +
            "93|58\n" +
            "93|55\n" +
            "13|46\n" +
            "13|77\n" +
            "13|75\n" +
            "13|45\n" +
            "13|15\n" +
            "13|24\n" +
            "13|53\n" +
            "13|98\n" +
            "13|84\n" +
            "13|36\n" +
            "13|17\n" +
            "13|19\n" +
            "13|91\n" +
            "13|79\n" +
            "13|67\n" +
            "13|76\n" +
            "13|59\n" +
            "13|57\n" +
            "13|97\n" +
            "13|35\n" +
            "13|71\n" +
            "13|93\n" +
            "13|85\n" +
            "13|44\n" +
            "23|47\n" +
            "23|15\n" +
            "23|74\n" +
            "23|25\n" +
            "23|58\n" +
            "23|77\n" +
            "23|86\n" +
            "23|79\n" +
            "23|91\n" +
            "23|72\n" +
            "23|55\n" +
            "23|83\n" +
            "23|48\n" +
            "23|84\n" +
            "23|94\n" +
            "23|67\n" +
            "23|51\n" +
            "23|34\n" +
            "23|53\n" +
            "23|13\n" +
            "23|62\n" +
            "23|11\n" +
            "23|75\n" +
            "23|59\n" +
            "27|38\n" +
            "27|34\n" +
            "27|91\n" +
            "27|23\n" +
            "27|75\n" +
            "27|84\n" +
            "27|62\n" +
            "27|13\n" +
            "27|58\n" +
            "27|11\n" +
            "27|51\n" +
            "27|86\n" +
            "27|74\n" +
            "27|47\n" +
            "27|94\n" +
            "27|67\n" +
            "27|83\n" +
            "27|48\n" +
            "27|25\n" +
            "27|53\n" +
            "27|43\n" +
            "27|55\n" +
            "27|72\n" +
            "27|59\n" +
            "24|71\n" +
            "24|44\n" +
            "24|94\n" +
            "24|45\n" +
            "24|17\n" +
            "24|78\n" +
            "24|36\n" +
            "24|93\n" +
            "24|87\n" +
            "24|23\n" +
            "24|85\n" +
            "24|19\n" +
            "24|62\n" +
            "24|38\n" +
            "24|35\n" +
            "24|64\n" +
            "24|89\n" +
            "24|97\n" +
            "24|39\n" +
            "24|43\n" +
            "24|49\n" +
            "24|27\n" +
            "24|98\n" +
            "24|76\n" +
            "19|45\n" +
            "19|64\n" +
            "19|27\n" +
            "19|89\n" +
            "19|76\n" +
            "19|51\n" +
            "19|97\n" +
            "19|49\n" +
            "19|58\n" +
            "19|93\n" +
            "19|17\n" +
            "19|23\n" +
            "19|62\n" +
            "19|94\n" +
            "19|38\n" +
            "19|35\n" +
            "19|87\n" +
            "19|78\n" +
            "19|85\n" +
            "19|25\n" +
            "19|72\n" +
            "19|39\n" +
            "19|43\n" +
            "19|44\n" +
            "97|44\n" +
            "97|35\n" +
            "97|47\n" +
            "97|55\n" +
            "97|49\n" +
            "97|78\n" +
            "97|23\n" +
            "97|27\n" +
            "97|62\n" +
            "97|93\n" +
            "97|89\n" +
            "97|11\n" +
            "97|72\n" +
            "97|51\n" +
            "97|94\n" +
            "97|17\n" +
            "97|25\n" +
            "97|38\n" +
            "97|58\n" +
            "97|87\n" +
            "97|76\n" +
            "97|64\n" +
            "97|43\n" +
            "97|39\n" +
            "67|97\n" +
            "67|17\n" +
            "67|77\n" +
            "67|39\n" +
            "67|89\n" +
            "67|71\n" +
            "67|93\n" +
            "67|84\n" +
            "67|98\n" +
            "67|45\n" +
            "67|76\n" +
            "67|24\n" +
            "67|15\n" +
            "67|79\n" +
            "67|44\n" +
            "67|19\n" +
            "67|78\n" +
            "67|64\n" +
            "67|35\n" +
            "67|57\n" +
            "67|87\n" +
            "67|85\n" +
            "67|36\n" +
            "67|46\n" +
            "43|84\n" +
            "43|59\n" +
            "43|25\n" +
            "43|11\n" +
            "43|48\n" +
            "43|13\n" +
            "43|91\n" +
            "43|38\n" +
            "43|53\n" +
            "43|94\n" +
            "43|86\n" +
            "43|15\n" +
            "43|58\n" +
            "43|72\n" +
            "43|47\n" +
            "43|34\n" +
            "43|83\n" +
            "43|67\n" +
            "43|62\n" +
            "43|74\n" +
            "43|55\n" +
            "43|75\n" +
            "43|51\n" +
            "43|23\n" +
            "74|17\n" +
            "74|71\n" +
            "74|84\n" +
            "74|79\n" +
            "74|53\n" +
            "74|93\n" +
            "74|19\n" +
            "74|97\n" +
            "74|13\n" +
            "74|36\n" +
            "74|59\n" +
            "74|86\n" +
            "74|75\n" +
            "74|67\n" +
            "74|98\n" +
            "74|85\n" +
            "74|15\n" +
            "74|91\n" +
            "74|46\n" +
            "74|76\n" +
            "74|45\n" +
            "74|77\n" +
            "74|57\n" +
            "74|24\n" +
            "57|87\n" +
            "57|64\n" +
            "57|39\n" +
            "57|24\n" +
            "57|71\n" +
            "57|17\n" +
            "57|97\n" +
            "57|93\n" +
            "57|36\n" +
            "57|27\n" +
            "57|23\n" +
            "57|78\n" +
            "57|45\n" +
            "57|76\n" +
            "57|35\n" +
            "57|98\n" +
            "57|46\n" +
            "57|38\n" +
            "57|43\n" +
            "57|19\n" +
            "57|89\n" +
            "57|85\n" +
            "57|44\n" +
            "57|49\n" +
            "83|85\n" +
            "83|13\n" +
            "83|15\n" +
            "83|36\n" +
            "83|74\n" +
            "83|86\n" +
            "83|71\n" +
            "83|59\n" +
            "83|46\n" +
            "83|91\n" +
            "83|19\n" +
            "83|79\n" +
            "83|53\n" +
            "83|97\n" +
            "83|57\n" +
            "83|93\n" +
            "83|77\n" +
            "83|76\n" +
            "83|67\n" +
            "83|45\n" +
            "83|98\n" +
            "83|24\n" +
            "83|75\n" +
            "83|84\n" +
            "39|91\n" +
            "39|48\n" +
            "39|34\n" +
            "39|51\n" +
            "39|55\n" +
            "39|23\n" +
            "39|47\n" +
            "39|27\n" +
            "39|83\n" +
            "39|64\n" +
            "39|74\n" +
            "39|86\n" +
            "39|53\n" +
            "39|43\n" +
            "39|13\n" +
            "39|78\n" +
            "39|94\n" +
            "39|49\n" +
            "39|25\n" +
            "39|58\n" +
            "39|72\n" +
            "39|62\n" +
            "39|11\n" +
            "39|38\n" +
            "25|55\n" +
            "25|46\n" +
            "25|57\n" +
            "25|71\n" +
            "25|79\n" +
            "25|75\n" +
            "25|67\n" +
            "25|74\n" +
            "25|11\n" +
            "25|48\n" +
            "25|86\n" +
            "25|15\n" +
            "25|91\n" +
            "25|53\n" +
            "25|24\n" +
            "25|98\n" +
            "25|84\n" +
            "25|34\n" +
            "25|13\n" +
            "25|59\n" +
            "25|83\n" +
            "25|36\n" +
            "25|47\n" +
            "25|77\n" +
            "75|76\n" +
            "75|71\n" +
            "75|39\n" +
            "75|89\n" +
            "75|67\n" +
            "75|57\n" +
            "75|15\n" +
            "75|17\n" +
            "75|24\n" +
            "75|19\n" +
            "75|97\n" +
            "75|84\n" +
            "75|77\n" +
            "75|78\n" +
            "75|44\n" +
            "75|45\n" +
            "75|93\n" +
            "75|79\n" +
            "75|36\n" +
            "75|35\n" +
            "75|85\n" +
            "75|46\n" +
            "75|98\n" +
            "75|87\n" +
            "86|71\n" +
            "86|19\n" +
            "86|84\n" +
            "86|57\n" +
            "86|97\n" +
            "86|67\n" +
            "86|17\n" +
            "86|93\n" +
            "86|59\n" +
            "86|91\n" +
            "86|98\n" +
            "86|79\n" +
            "86|76\n" +
            "86|77\n" +
            "86|53\n" +
            "86|45\n" +
            "86|35\n" +
            "86|75\n" +
            "86|85\n" +
            "86|15\n" +
            "86|13\n" +
            "86|36\n" +
            "86|24\n" +
            "86|46\n" +
            "58|46\n" +
            "58|36\n" +
            "58|83\n" +
            "58|59\n" +
            "58|34\n" +
            "58|72\n" +
            "58|24\n" +
            "58|57\n" +
            "58|11\n" +
            "58|13\n" +
            "58|25\n" +
            "58|91\n" +
            "58|77\n" +
            "58|86\n" +
            "58|53\n" +
            "58|67\n" +
            "58|79\n" +
            "58|15\n" +
            "58|47\n" +
            "58|75\n" +
            "58|84\n" +
            "58|48\n" +
            "58|74\n" +
            "89|47\n" +
            "89|72\n" +
            "89|49\n" +
            "89|25\n" +
            "89|62\n" +
            "89|27\n" +
            "89|43\n" +
            "89|86\n" +
            "89|39\n" +
            "89|53\n" +
            "89|78\n" +
            "89|51\n" +
            "89|83\n" +
            "89|58\n" +
            "89|64\n" +
            "89|55\n" +
            "89|48\n" +
            "89|13\n" +
            "89|23\n" +
            "89|74\n" +
            "89|94\n" +
            "89|11\n" +
            "85|23\n" +
            "85|47\n" +
            "85|62\n" +
            "85|94\n" +
            "85|49\n" +
            "85|44\n" +
            "85|78\n" +
            "85|58\n" +
            "85|87\n" +
            "85|76\n" +
            "85|38\n" +
            "85|17\n" +
            "85|97\n" +
            "85|93\n" +
            "85|51\n" +
            "85|35\n" +
            "85|27\n" +
            "85|89\n" +
            "85|11\n" +
            "85|72\n" +
            "85|39\n" +
            "71|38\n" +
            "71|43\n" +
            "71|78\n" +
            "71|94\n" +
            "71|19\n" +
            "71|27\n" +
            "71|93\n" +
            "71|49\n" +
            "71|76\n" +
            "71|35\n" +
            "71|23\n" +
            "71|44\n" +
            "71|51\n" +
            "71|62\n" +
            "71|39\n" +
            "71|89\n" +
            "71|45\n" +
            "71|98\n" +
            "71|64\n" +
            "71|58\n" +
            "91|15\n" +
            "91|45\n" +
            "91|84\n" +
            "91|75\n" +
            "91|46\n" +
            "91|93\n" +
            "91|87\n" +
            "91|59\n" +
            "91|89\n" +
            "91|76\n" +
            "91|97\n" +
            "91|71\n" +
            "91|98\n" +
            "91|24\n" +
            "91|79\n" +
            "91|57\n" +
            "91|17\n" +
            "91|19\n" +
            "91|36\n" +
            "49|51\n" +
            "49|59\n" +
            "49|23\n" +
            "49|91\n" +
            "49|72\n" +
            "49|47\n" +
            "49|13\n" +
            "49|58\n" +
            "49|48\n" +
            "49|11\n" +
            "49|94\n" +
            "49|86\n" +
            "49|62\n" +
            "49|25\n" +
            "49|74\n" +
            "49|53\n" +
            "49|83\n" +
            "49|67\n" +
            "78|72\n" +
            "78|27\n" +
            "78|53\n" +
            "78|74\n" +
            "78|58\n" +
            "78|34\n" +
            "78|86\n" +
            "78|11\n" +
            "78|91\n" +
            "78|48\n" +
            "78|25\n" +
            "78|38\n" +
            "78|47\n" +
            "78|64\n" +
            "78|55\n" +
            "78|94\n" +
            "78|59\n" +
            "77|98\n" +
            "77|36\n" +
            "77|93\n" +
            "77|35\n" +
            "77|76\n" +
            "77|78\n" +
            "77|44\n" +
            "77|79\n" +
            "77|64\n" +
            "77|43\n" +
            "77|45\n" +
            "77|39\n" +
            "77|57\n" +
            "77|24\n" +
            "77|27\n" +
            "77|89\n" +
            "51|57\n" +
            "51|11\n" +
            "51|25\n" +
            "51|86\n" +
            "51|91\n" +
            "51|46\n" +
            "51|58\n" +
            "51|13\n" +
            "51|48\n" +
            "51|55\n" +
            "51|77\n" +
            "51|74\n" +
            "51|59\n" +
            "51|72\n" +
            "51|53\n" +
            "36|23\n" +
            "36|43\n" +
            "36|35\n" +
            "36|19\n" +
            "36|49\n" +
            "36|27\n" +
            "36|97\n" +
            "36|17\n" +
            "36|51\n" +
            "36|93\n" +
            "36|71\n" +
            "36|85\n" +
            "36|76\n" +
            "36|98\n" +
            "76|34\n" +
            "76|58\n" +
            "76|44\n" +
            "76|38\n" +
            "76|48\n" +
            "76|35\n" +
            "76|87\n" +
            "76|89\n" +
            "76|72\n" +
            "76|23\n" +
            "76|47\n" +
            "76|94\n" +
            "76|11\n" +
            "48|45\n" +
            "48|24\n" +
            "48|98\n" +
            "48|57\n" +
            "48|84\n" +
            "48|36\n" +
            "48|13\n" +
            "48|67\n" +
            "48|75\n" +
            "48|83\n" +
            "48|46\n" +
            "48|79\n" +
            "46|39\n" +
            "46|89\n" +
            "46|23\n" +
            "46|38\n" +
            "46|93\n" +
            "46|97\n" +
            "46|45\n" +
            "46|87\n" +
            "46|71\n" +
            "46|98\n" +
            "46|62\n" +
            "34|84\n" +
            "34|24\n" +
            "34|91\n" +
            "34|67\n" +
            "34|19\n" +
            "34|15\n" +
            "34|77\n" +
            "34|93\n" +
            "34|85\n" +
            "34|13\n" +
            "11|75\n" +
            "11|47\n" +
            "11|86\n" +
            "11|83\n" +
            "11|98\n" +
            "11|13\n" +
            "11|55\n" +
            "11|59\n" +
            "11|71\n" +
            "53|19\n" +
            "53|17\n" +
            "53|76\n" +
            "53|77\n" +
            "53|24\n" +
            "53|75\n" +
            "53|87\n" +
            "53|71\n" +
            "47|15\n" +
            "47|34\n" +
            "47|48\n" +
            "47|86\n" +
            "47|55\n" +
            "47|59\n" +
            "47|84\n" +
            "55|77\n" +
            "55|48\n" +
            "55|34\n" +
            "55|84\n" +
            "55|83\n" +
            "55|71\n" +
            "35|89\n" +
            "35|78\n" +
            "35|34\n" +
            "35|58\n" +
            "35|55\n" +
            "45|35\n" +
            "45|17\n" +
            "45|76\n" +
            "45|43\n" +
            "38|11\n" +
            "38|34\n" +
            "38|84\n" +
            "64|91\n" +
            "64|72\n" +
            "62|51\n" +
            "\n" +
            "98,85,15,24,46,97,19,89,87,44,57\n" +
            "64,39,94,19,49,27,85,36,23\n" +
            "17,71,97,93,49,43,24,76,62,98,27,87,38,19,44,89,78\n" +
            "13,71,57,79,76,24,36,67,77,74,19\n" +
            "79,71,45,17,87,49,43\n" +
            "53,91,75,84,15,79,46,24,36,71,98,19,85,97,93,35,44\n" +
            "49,43,38,11,48,83,86,13,53,91,75\n" +
            "62,94,51,72,47,48,74,86,13,53,59,75,67,15,77\n" +
            "97,38,62,39,45,36,49,23,35,43,78,89,94,27,71,44,19,93,85\n" +
            "94,51,83,47,91,13,67,72,86,11,59,25,84,79,57,74,34,77,48,58,15,55,53\n" +
            "34,91,49,23,43,13,53,74,86,78,55,62,94\n" +
            "97,17,35,87,39,78,64,49,38,51,25\n" +
            "17,35,87,89,78,64,43,38,62,94,51,72,11,55,34\n" +
            "45,71,93,64,35,39,89,76,98,44,24,27,49,17,78,46,38,85,97,43,23\n" +
            "23,35,27,72,89,47,38,43,44\n" +
            "77,57,46,36,98,19,85,97,35,44,39,64,27\n" +
            "34,83,47,84,11,59,53,67,48,86,38,91,23,62,94,15,13,58,75,72,55,51,74\n" +
            "79,98,44,78,87,97,24,15,17,71,36,77,67,89,46\n" +
            "87,39,49,43,94,58,72,11,47,48,86\n" +
            "15,86,83,58,72,25,91,84,53,51,55,47,62,13,23,38,11,59,94,48,74\n" +
            "53,74,98,57,86,46,13,19,59,48,75,85,83,34,71\n" +
            "72,86,62,51,38,15,84,58,91\n" +
            "87,39,79,57,71,97,19,89,44,35,67,77,24,46,78,36,84\n" +
            "25,34,74,91,67,84,77,36,71\n" +
            "35,87,39,62,94,51,72,34,83\n" +
            "76,17,35,44,87,78,64,49,27,43,38,23,62,94,51,58,25,55,48\n" +
            "75,45,67,93,39,71,15\n" +
            "46,24,36,98,19,97,76,87,49,38,23\n" +
            "87,94,44,89,98,71,38,17,35,78,36\n" +
            "76,17,35,44,87,89,23,51,72,11,47\n" +
            "43,35,46,45,19,97,24,36,89,79,93\n" +
            "53,83,79,84,47,59,77,55,67,48,25,15,72,74,91,36,86\n" +
            "27,87,78,44,64,98,71,77,57,35,85,39,93,19,89,46,17,76,97,79,45,24,49\n" +
            "79,57,46,71,98,19,45,85,97,93,76,17,44,87,89,39,78,64,49,27,43\n" +
            "44,64,49,27,23,62,94,51,58,25,11,83,74\n" +
            "79,46,24,36,71,98,19,45,85,97,93,17,35,89,39,78,64,49,43\n" +
            "79,46,87,45,97,44,27,39,43,19,64\n" +
            "25,11,47,48,34,83,74,86,13,53,59,75,67,15,77,79,24,36,71\n" +
            "13,53,79,19,45,76,35\n" +
            "53,91,59,75,67,84,15,77,79,57,46,24,36,71,98,19,85,97,93,76,17,35,44\n" +
            "49,48,39,51,38,27,87,55,83,23,64,62,44,78,72,94,58,43,47,34,35\n" +
            "93,76,44,89,39,78,49,38,23,25,11,47,55\n" +
            "98,45,97,93,76,87,89,78,23,62,94,51,58\n" +
            "74,36,72,79,24,48,53,59,55\n" +
            "38,51,17,94,11,49,93\n" +
            "58,47,55,48,83,86,59,75,67,84,77,79,57,46,24\n" +
            "71,78,97,49,76,23,94,64,45,89,93,62,51,98,17,38,39,19,85,27,43\n" +
            "38,58,94,49,83,53,25,62,75,23,27\n" +
            "53,91,84,15,77,79,46,24,36,98,85,97,93,76,17,35,44\n" +
            "25,86,47,27,59,48,83,58,94,55,43,62,75,51,67,91,13,53,11\n" +
            "19,45,85,97,93,76,17,35,44,87,89,78,64,49,27,43,38,23,62,94,51,58,72\n" +
            "55,84,86,72,58,11,91,46,57,34,24,83,77\n" +
            "87,39,78,49,62,94,72,74,86\n" +
            "85,97,93,76,17,35,44,87,78,64,49,27,43,38,23,62,94,51,58,72,25\n" +
            "36,34,67,91,59,57,77,53,97\n" +
            "84,15,77,57,46,24,45,85,97,93,76,35,44,87,39,78,64\n" +
            "51,62,58,97,43,85,64,87,89,44,93,27,94,25,11\n" +
            "84,15,57,24,36,71,98,19,45,85,97,93,76,17,44,87,89,78,64\n" +
            "36,62,76,44,38,24,93\n" +
            "67,48,24,86,11,91,53,13,34,84,55\n" +
            "25,74,53,84,46,15,11,55,34,71,48,75,77,47,59,24,57,83,36\n" +
            "49,79,57,78,77,27,36\n" +
            "24,36,98,45,85,97,93,76,35,44,87,89,78\n" +
            "77,57,79,15,78,49,19\n" +
            "93,78,97,85,19,44,49,27,62,24,89,23,17,43,64,36,87,45,76\n" +
            "62,94,51,58,72,25,11,55,48,34,83,74,86,13,53,91,59,75,67,84,15,77,79\n" +
            "34,53,72,51,83,11,86,48,67,47,77,13,59,57,75,58,46\n" +
            "67,36,74,77,24,34,19,53,98,86,46,45,83,71,91,15,57,75,13,84,48,59,55\n" +
            "36,93,17,44,87,89,27\n" +
            "93,57,77,39,79,44,89,75,46,45,97,35,15,76,87,84,71,98,17\n" +
            "62,47,79,25,51,72,74,55,94,84,53\n" +
            "45,93,17,35,44,87,89,39,78,49,27,62,51,58,25\n" +
            "57,64,84,24,87,46,36,76,39,85,78\n" +
            "86,25,79,15,46,57,58,77,13,47,91,84,75,51,59,55,74\n" +
            "89,64,58,94,43,87,44,47,93,49,51,76,11,78,17,72,97,38,25,27,39,62,23\n" +
            "72,25,11,47,55,34,83,74,13,53,91,59,67,84,15,77,79,57,46,24,36\n" +
            "53,75,24,71,46,86,67,45,98,84,83,91,57,36,55,19,79,77,59,48,34\n" +
            "89,97,85,98,44,58,51\n" +
            "86,53,91,59,75,67,15,77,79,57,46,98,85,97,93,76,17\n" +
            "64,38,23,94,51,58,72,25,11,55,48,34,83,74,86,13,53,91,59\n" +
            "64,38,47,34,72,94,17,25,49,58,55\n" +
            "35,36,39,49,78,27,57,89,46,76,93,17,98,44,77\n" +
            "64,49,39,34,51,48,62,43,78,35,58,87,25,89,27,38,11,55,44,94,83\n" +
            "62,51,11,83,74,13,79\n" +
            "11,27,62,67,13,83,23,72,38,58,53\n" +
            "27,23,62,58,47,13,67\n" +
            "93,17,35,87,39,64,49,27,43,62,94,58,25,11,47\n" +
            "15,57,46,19,76,17,35,44,87,89,64\n" +
            "39,74,13,38,86,11,78,53,43\n" +
            "87,78,94,64,62,85,39,72,23\n" +
            "85,93,78,64,43,62,94,72,11\n" +
            "15,58,79,83,13,91,57,53,48\n" +
            "57,24,71,19,45,97,93,76,35,44,89,64,49,43,38\n" +
            "51,34,43,75,27,94,25,83,55,13,38,91,62,48,59,47,11,86,58,53,67\n" +
            "71,98,19,45,85,97,93,76,17,35,44,87,89,39,78,64,49,27,38,94,51\n" +
            "36,71,98,19,85,97,93,76,17,35,44,87,89,39,78,64,49,27,43,38,23,62,94\n" +
            "36,71,98,19,45,97,93,44,43,38,23,62,94\n" +
            "13,34,84,46,67,83,91,86,47,55,11\n" +
            "67,84,75,15,46,74,48,34,11,83,71,53,36,77,86,91,57,79,98,24,13\n" +
            "76,87,35,98,39,71,27,85,93,78,49,24,62,38,44,45,43,17,19,23,64\n" +
            "67,25,48,13,71,36,79,77,59,53,83,11,86\n" +
            "59,71,75,74,13,91,79,67,47,86,57,48,53,19,98,55,77,46,15,83,84\n" +
            "48,83,86,13,84,15,79,46,36,71,98\n" +
            "47,55,78,11,64,48,17,44,58,62,72,51,23,38,25,35,89,76,94,39,43,87,49\n" +
            "34,83,74,86,13,53,91,59,75,67,84,15,77,79,57,46,24,36,71,19,45,85,97\n" +
            "13,53,91,59,75,67,84,15,77,79,57,24,36,71,19,45,85,97,93,76,35\n" +
            "17,35,44,87,89,78,64,27,43,38,23,62,51,72,25,11,47,48,34\n" +
            "43,38,23,62,94,51,72,25,47,55,48,34,74,86,53,59,75,67,84\n" +
            "19,76,17,35,44,87,89,39,64,49,27,23,62,58,72\n" +
            "17,35,44,87,89,39,78,64,49,27,43,38,23,62,94,51,58,72,11,47,55,48,34\n" +
            "86,13,67,46,75,84,83,58,91,72,11,74,77,47,55,53,15,48,25,34,59,57,24\n" +
            "59,15,57,98,44,87,89\n" +
            "71,76,67,36,57,79,24,91,15,98,86,59,46,77,45,97,85,53,17,19,75,84,13\n" +
            "62,51,58,72,25,55,48,34,83,74,53\n" +
            "77,15,49,87,46,71,24\n" +
            "86,13,91,59,75,67,15,57,36,71,19,45,85,97,93,76,17\n" +
            "55,48,34,53,67,84,79,98,45\n" +
            "47,27,94,67,75,43,11\n" +
            "85,36,27,49,94,19,43,38,93,45,89,97,71,76,44,23,64,98,87,78,62\n" +
            "78,25,38,86,94,27,58,11,49,83,87,43,72,23,64,39,74,55,34,89,47,51,48\n" +
            "57,24,71,19,85,97,76,17,35,87,89,78,64,49,27\n" +
            "93,71,79,19,97,77,44,15,87,35,67,84,91,85,76\n" +
            "64,43,94,86,49,83,53,72,23,55,58,13,27,91,74,34,62,38,48,11,78\n" +
            "62,13,53,91,59,77,79\n" +
            "39,78,64,27,43,38,62,94,72,25,11,47,48,34,83,74,86,13,53\n" +
            "83,46,93,97,71,98,59,53,36,13,84\n" +
            "79,57,55,34,15,47,74,25,11,53,58,67,86,46,91,84,13,48,75\n" +
            "36,35,98,49,79,45,24,44,78,97,71,64,93,17,87,77,46\n" +
            "44,89,78,64,94,72,48\n" +
            "86,72,43,11,78\n" +
            "19,17,98,62,39,24,43,71,49,38,64,97,36,35,93\n" +
            "62,94,51,58,72,25,11,47,55,48,34,74,86,53,91,59,75,67,84,77,79\n" +
            "34,79,62,72,77,25,75\n" +
            "91,75,84,77,79,57,46,36,71,19,17,44,87\n" +
            "36,85,75,97,19,76,13,15,84,77,24,86,45,91,53,67,59,17,71\n" +
            "64,27,62,94,58,11,55,48,74,53,59\n" +
            "55,48,34,83,74,13,53,91,59,24,36,71,98,19,45\n" +
            "11,47,58,23,17,51,64,72,76,55,35,89,78,49,43,94,44\n" +
            "62,94,58,25,47,48,83,86,13,15,77\n" +
            "93,35,43,51,38,87,89,17,39,78,94,45,98,71,76,85,62\n" +
            "57,46,24,36,71,98,19,85,93,76,17,44,87,89,39,78,49,27,38\n" +
            "84,77,46,24,98,85,17,87,64\n" +
            "83,74,13,53,59,75,67,15,79,57,46,98,45,85,97\n" +
            "39,17,62,51,35,45,76,43,64,44,94,93,98,58,19,87,78\n" +
            "48,74,86,13,53,91,59,67,84,15,77,79,57,46,24,36,71,98,19,45,85\n" +
            "19,45,97,93,76,17,44,87,89,39,49,43,38,62,94,58,72\n" +
            "23,17,46,38,24,49,87\n" +
            "75,77,57,46,36,71,45,97,76,17,35,44,87,89,39\n" +
            "34,83,74,86,53,91,59,75,67,84,15,77,57,46,36,71,98,19,45,85,97\n" +
            "89,78,55,83,72,58,11,64,13,94,38,47,62,74,34,86,49,23,51,25,27\n" +
            "53,94,79,55,57,83,58,74,77,47,25,67,13\n" +
            "71,75,85,97,15,35,13,84,93\n" +
            "89,93,39,11,62,58,78,97,25,27,51,94,76,72,49,35,44,64,87,47,43,23,38\n" +
            "57,77,71,87,97,24,91,59,85,35,44,15,17\n" +
            "24,35,97,76,19,45,93,79,46\n" +
            "58,72,25,47,55,34,83,74,13,53,91,67,84,15,57,46,24\n" +
            "46,24,36,71,98,19,45,85,93,76,17,35,89,39,78,64,49,27,43,38,23\n" +
            "27,43,38,23,62,51,58,72,25,11,47,55,48,34,83,74,86,13,53,91,75\n" +
            "23,51,72,34,83,74,13,53,84,15,77\n" +
            "67,83,57,36,93,46,77,15,91,97,59,71,74,84,19\n" +
            "23,49,27,64,51,86,72,39,58,87,38\n" +
            "34,74,86,59,84,77,79,24,36,71,98,19,45\n" +
            "91,75,67,15,77,79,46,24,36,71,98,19,85,97,76,17,35,44,87\n" +
            "89,51,47,83,11,38,64,72,78,49,39,74,48,94,27,87,44,34,25,55,43,23,62\n" +
            "77,98,86,19,93,15,13\n" +
            "38,23,94,58,48,34,13,91,75,67,15\n" +
            "71,98,45,97,93,76,17,35,89,39,78,49,43,38,23,62,51\n" +
            "48,74,86,13,53,59,15,79,46,24,36,19,45\n" +
            "55,58,23,47,43,48,49,13,86,38,51,78,72,94,11,34,74,62,64,83,53\n" +
            "43,38,62,94,51,58,72,25,11,55,34,74,86,13,53,91,59,67,84\n" +
            "51,57,74,72,55,47,86,34,91,77,83,79,59,58,11\n" +
            "74,47,53,51,15,75,59,46,55\n" +
            "15,57,24,36,98,19,85,97,93,76,17,35,89,39,49\n" +
            "58,72,11,47,48,34,83,74,86,75,67,15,77,57,24\n" +
            "38,23,62,94,51,58,72,25,11,47,55,48,34,83,74,86,13,53,91,59,75,67,84\n" +
            "89,39,78,49,43,38,94,51,72,25,11,47,83,86,13\n" +
            "55,34,86,13,53,91,59,75,67,84,15,77,79,57,24,71,98,19,45\n" +
            "74,86,53,91,84,19,76\n" +
            "71,98,19,45,85,97,17,39,64,27,43,62,51\n" +
            "75,67,84,77,57,46,36,71,19,45,93,17,44,87,39\n" +
            "11,55,34,74,13,53,91,59,84,77,57,71,98\n" +
            "35,44,87,89,39,78,27,38,23,62,94,58,72,25,11,55,83\n" +
            "94,51,72,55,34,86,13,53,91,67,15,77,79\n" +
            "91,75,67,84,15,77,79,57,46,36,45,85,97,76,17,35,87\n" +
            "79,57,46,24,71,98,45,85,97,76,17,44,87,89,39,64,49,27,43\n" +
            "27,89,39,34,62,83,47,25,49,23,51,78,48,58,74,44,94,72,38\n" +
            "85,97,93,76,17,35,44,87,23,58,11\n" +
            "64,49,27,23,62,94,51,58,72,47,55,34,83,74,86,13,53,91,59\n" +
            "78,64,49,27,43,38,23,62,94,51,58,72,25,47,55,48,34,83,74,86,13\n" +
            "13,15,85,91,67,34,71,53,79,45,46,98,36,77,24,48,57,86,74,19,59,83,84\n" +
            "49,27,23,51,58,55,34,74,86,53,75\n" +
            "59,15,77,57,46,24,36,71,98,19,45,85,97,93,76,17,44,87,89\n" +
            "23,89,76,39,36,38,43,98,85,44,46,17,35,93,71\n" +
            "94,51,58,72,25,11,47,55,48,34,83,74,13,53,91,59,75,67,84,15,77,79,57\n" +
            "55,64,58,89,39,86,23,72,38,13,48,25,47,34,27\n" +
            "64,23,49,17,78,89,27,87,58,39,93,35,97,98,43,85,19,44,94\n" +
            "87,85,19,72,58,38,64,17,43,49,93,39,76,23,97,51,78,94,44,62,35,27,89\n" +
            "25,55,83,86,13,53,91,75,67,15,79,57,71\n" +
            "49,43,23,62,94,58,72,25,47,55,48,83,75\n" +
            "35,91,79,15,71,46,59,19,75,93,45,67,76,77,85,53,97,36,17,57,24,84,13";

    Map<Integer, ArrayList<Rule>> rulesFront = new HashMap<>();
    Map<Integer, ArrayList<Rule>> rulesBack = new HashMap<>();
    ArrayList<ArrayList<Integer>> updates = new ArrayList<>();
    ArrayList<ArrayList<Integer>> validUpdates = new ArrayList<>();
    ArrayList<ArrayList<Integer>> correctedUpdates;
    ArrayList<Integer> middlePages = new ArrayList<>();

    public void read() {
        String[] lines = input.split("\n");
        for (String line : lines) {
            if (line.contains("|")) {
                String[] values = line.split("\\|");
                int front = Integer.parseInt(values[0]);
                int back = Integer.parseInt(values[1]);
                Rule rule = new Rule(front, back);
                rulesFront.putIfAbsent(front, new ArrayList<>());
                rulesBack.putIfAbsent(back, new ArrayList<>());
                rulesFront.get(front).add(rule);
                rulesBack.get(back).add(rule);
            }
            if (line.contains(",")) {
                ArrayList<Integer> manual = new ArrayList<>();
                String[] values = line.split(",");
                for (String value : values) {
                    manual.add(Integer.parseInt(value));
                }
                updates.add(manual);
            }
        }
    }

    public boolean valid(ArrayList<Integer> manual) {
        boolean valid = true;
        for (int i = 0; i < manual.size(); i++) {
            Integer page = manual.get(i);
            var pageRules = rulesBack.get(page);
            if (pageRules == null || pageRules.isEmpty()) {
                continue;
            }
            for (int j = i + 1; j < manual.size(); j++) {
                Integer next = manual.get(j);
                for (Rule rule : pageRules) {
                    if (rule.front == next) {
                        valid = false;
                        break;
                    }
                }
                if (!valid) {
                    break;
                }
            }
            if (!valid) {
                break;
            }
        }
        if (valid) {
            for (int i = manual.size() - 1; i >= 0; i--) {
                Integer page = manual.get(i);
                var pageRules = rulesFront.get(page);
                if (pageRules == null || pageRules.isEmpty()) {
                    continue;
                }
                for (int j = 0; j < i; j++) {
                    Integer prev = manual.get(j);
                    for (Rule rule : pageRules) {
                        if (rule.back == prev) {
                            valid = false;
                            break;
                        }
                    }
                    if (!valid) {
                        break;
                    }
                }
                if (!valid) {
                    break;
                }
            }
        }
        return valid;
    }

    public void part1() {
        read();
        for (ArrayList<Integer> manual : updates) {
            if (!valid(manual)) {
                validUpdates.add(manual);
                int middle = ((int) manual.size() / 2);
                middlePages.add(manual.get(middle));
            }
        }
        int sum = 0;
        for (Integer middlePage : middlePages) {
            sum += middlePage;
        }
        System.out.println("Day five part 1 total");
        System.out.println(sum);
    }


    public ArrayList<Integer> fix(ArrayList<Integer> manual) {
        ArrayList<Integer> corrected = new ArrayList<>();
        for (int i = 0; i < manual.size(); i++) {
            Integer page = manual.get(i);
            var pageRules = rulesBack.get(page);
            if (pageRules == null || pageRules.isEmpty()) {
                if (!corrected.contains(page)) {
                    corrected.add(page);
                }
                continue;
            }
            for (int j = i + 1; j < manual.size(); j++) {
                Integer next = manual.get(j);
                for (Rule rule : pageRules) {
                    if (rule.front == next) {
                        if (!corrected.contains(next)) {
                            corrected.add(next);
                        }
                    }
                }
            }
            if (!corrected.contains(page)) {
                corrected.add(page);
            }
        }
        if (!valid(corrected)) {
            for (int i = manual.size() - 1; i >= 0; i--) {
                Integer page = manual.get(i);
                var pageRules = rulesFront.get(page);
                if (pageRules == null || pageRules.isEmpty()) {
                    if (!corrected.contains(page)) {
                        corrected.add(page);
                    }
                    continue;
                }
                for (int j = 0; j < i; j++) {
                    Integer prev = manual.get(j);
                    for (Rule rule : pageRules) {
                        if (rule.back == prev) {
                            if (!corrected.contains(page)) {
                                corrected.add(page);
                            }
                            if (!corrected.contains(prev)) {
                                corrected.add(prev);
                            }
                        } else {
                            if (!corrected.contains(page)) {
                                corrected.add(page);
                            }
                        }
                    }
                }
            }
        }
        return corrected;
    }

    public void part2() {
        read();
        correctedUpdates = new ArrayList<>();
        for (ArrayList<Integer> manual : updates) {
            ArrayList<Integer> corrected = manual;
            if (!valid(manual)) {
                while (!valid(corrected)) {
                    corrected = fix(corrected);
                }
                correctedUpdates.add(corrected);
            }
        }
        for (ArrayList<Integer> correctedUpdate : correctedUpdates) {
            int middle = ((int) correctedUpdate.size() / 2);
            middlePages.add(correctedUpdate.get(middle));
        }
        int sum = 0;
        for (Integer middlePage : middlePages) {
            sum += middlePage;
        }
        System.out.println("Day five part 2 total");
        System.out.println(sum);
    }

    class Rule {
        int front;
        int back;

        public Rule(int front, int back) {
            this.front = front;
            this.back = back;
        }

        @Override
        public String toString() {
            return "Rule{" + "front=" + front + ", back=" + back + '}';
        }
    }

}
